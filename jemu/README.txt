================================================================================
재무제표 데이터 (jemu 폴더)
================================================================================

1. 데이터 출처
--------------------------------------------------------------------------------
OpenDART 재무정보 일괄다운로드
https://opendart.fss.or.kr/disclosureinfo/fnltt/dwld/main.do

다운로드 방법:
1) 위 URL 접속
2) 재무정보 일괄다운로드 선택
3) 연도/보고서 종류 선택 후 다운로드:
   - 02_손익계산서
   - 03_포괄손익계산서


2. 파일명 규칙
--------------------------------------------------------------------------------
원본 파일명: {연도}_{보고서종류}_{번호}_{재무제표종류}_{다운로드일자}.txt

예시:
  2024_1분기보고서_02_손익계산서_20250221.txt
  2024_1분기보고서_03_포괄손익계산서_20250221.txt
  2024_반기보고서_02_손익계산서_20250805.txt
  2024_반기보고서_03_포괄손익계산서_20250805.txt
  2024_3분기보고서_02_손익계산서_20250605.txt
  2024_3분기보고서_03_포괄손익계산서_20250605.txt
  2024_사업보고서_02_손익계산서_20251111.txt
  2024_사업보고서_03_포괄손익계산서_20251111.txt

보고서 종류 -> 분기 매핑:
  - 1분기보고서 -> 1Q
  - 반기보고서  -> 2Q
  - 3분기보고서 -> 3Q
  - 사업보고서  -> 4Q


3. 파일 형식
--------------------------------------------------------------------------------
- 인코딩: CP949 (EUC-KR)
- 구분자: 탭(Tab)
- 첫 행: 헤더


4. 컬럼 구조
--------------------------------------------------------------------------------
| 컬럼명           | 설명                                      | 사용 여부 |
|-----------------|------------------------------------------|----------|
| 재무제표종류      | 손익계산서/포괄손익계산서 종류 (별도/연결)   | O        |
| 종목코드         | [005930] 형태                             | O        |
| 회사명           | 회사 이름                                  |          |
| 시장구분         | 유가증권/코스닥 등                          |          |
| 업종             | 업종 코드                                  |          |
| 업종명           | 업종 이름                                  |          |
| 결산월           | 결산 월                                    |          |
| 결산기준일        | 결산 기준일                                |          |
| 보고서종류        | 1분기/반기/3분기/사업보고서                  |          |
| 통화             | KRW 등                                    |          |
| 항목코드         | IFRS/DART 항목코드                         | O        |
| 항목명           | 항목 한글명                                 |          |
| 당기 N분기 3개월  | 해당 분기 3개월 실적 (원)                    | O        |
| 당기 N분기 누적   | 해당 분기 누적 실적 (원)                     |          |
| 전기 N분기 3개월  | 전년 동기 3개월 실적 (원)                    |          |
| 전기 N분기 누적   | 전년 동기 누적 실적 (원)                     |          |
| 전기             | 전년 연간 실적 (원)                          |          |
| 전전기           | 전전년 연간 실적 (원)                        |          |


5. 사용하는 항목코드
--------------------------------------------------------------------------------
| 항목코드                    | 항목명     | 설명                    |
|----------------------------|-----------|------------------------|
| ifrs-full_Revenue          | 매출액     | 수익(매출액)             |
| dart_OperatingIncomeLoss   | 영업이익   | 영업이익(손실)           |
| ifrs-full_ProfitLoss       | 순이익     | 당기순이익(손실)          |


6. 분기별 값 컬럼
--------------------------------------------------------------------------------
| 분기 | 값 컬럼명            |
|-----|---------------------|
| 1Q  | 당기 1분기 3개월      |
| 2Q  | 당기 반기 3개월       |
| 3Q  | 당기 3분기 3개월      |
| 4Q  | 당기                 |


7. 종목코드 형식
--------------------------------------------------------------------------------
파일 내 종목코드는 대괄호로 감싸져 있음: [005930]
조회 시 입력 형식: 005930 (대괄호 없이)


8. 데이터 조회 로직
--------------------------------------------------------------------------------
1) 포괄손익계산서 파일에서 해당 종목 검색
2) 첫 번째 행의 '재무제표종류' 확인
3) "포괄손익계산서"이면 -> 손익계산서 파일에서 다시 검색
   "손익계산서"이면 -> 해당 데이터 사용

이유: 삼성전자 등 일부 대형주는 포괄손익계산서 파일에 매출액/영업이익이 없고,
      손익계산서 파일에만 있음


9. 4Q 데이터 보정
--------------------------------------------------------------------------------
사업보고서(4Q)의 '당기' 값은 연간 누적이므로 실제 4분기 실적을 구하려면:

  4Q 실적 = 당기(연간 누적) - 1Q - 2Q - 3Q

예시 (SK하이닉스 2024년 매출액):
  - 당기(연간): 557,363억
  - 1Q: 104,018억
  - 2Q: 136,134억
  - 3Q: 147,940억
  - 4Q = 557,363 - 104,018 - 136,134 - 147,940 = 169,270억


================================================================================
