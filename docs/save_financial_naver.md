# save_financial_naver

네이버 금융에서 재무제표 데이터를 크롤링하여 저장합니다.

## 사용법

```bash
# 단일 종목
python manage.py save_financial_naver --code 005930

# 전체 종목
python manage.py save_financial_naver --code all
```

## 옵션

| 옵션 | 필수 | 설명 |
|------|------|------|
| `--code` | O | 종목코드 또는 "all" (전체 종목, ETF 제외) |

## 데이터 소스

- URL: `https://finance.naver.com/item/main.naver?code={종목코드}`
- 크롤링 대상: 주요재무정보 테이블

## 수집 데이터

| 항목 | 설명 |
|------|------|
| 매출액 | 억원 → 원 단위 변환 |
| 영업이익 | 억원 → 원 단위 변환 |
| 당기순이익 | 억원 → 원 단위 변환 |
| 영업이익률 | % |
| 순이익률 | % |
| ROE | 지배주주 기준, % |
| 추정치 여부 | (E) 표시 여부 |

## 수집 범위

- 연간: 최근 4개년
- 분기: 최근 6분기

## 저장 방식

- 기존 데이터가 있으면 UPDATE
- 없으면 INSERT
- `Financial` 모델에 저장

## 전체 종목 처리 시

- 요청 간격: 0.3초 (네이버 차단 방지)
- 처리 완료 후 성공/실패 건수 출력
- 실패 종목 코드 목록 표시 (최대 20개)

## 출력 예시

```
# 단일 종목
삼성전자(005930) 네이버 금융 크롤링 시작...
삼성전자(005930) 저장 완료: 신규 0건, 업데이트 10건

# 전체 종목
전체 2847개 종목 처리 시작...
[1/2847] 삼성전자(005930) 처리 중...
[2/2847] SK하이닉스(000660) 처리 중...
...
=== 처리 완료 ===
성공: 2840개
실패: 7개
실패 종목: 000000, 111111, ...
```

## 주의사항

- `Info` 모델에 종목이 등록되어 있어야 함
- 네이버 금융 페이지 구조 변경 시 파싱 실패 가능
- 전체 종목 처리 시 약 15분 소요 (2800개 기준)
